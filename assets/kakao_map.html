<!DOCTYPE html>
<style>
    html, body {
        width: 100%; height: 100%; margin:0; padding:0;
    }
</style>
<html>
<head>
    <script type="text/javascript"
            src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f9fa76887058db0ceb622956fdea69f1&autoload=false"></script>
</head>
<body>
<div id="map" style="width:100%;height:100%;"></div>
<script type="text/javascript">

    var content = '<div class ="label"><svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>PNG/settingsic_location</title><g id="PNG/settingsic_location" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Common/location" transform="translate(9.499700, 6.500000)" fill="#4D4D52" fill-rule="nonzero"><path d="M10.5,15.0002579 C8.0145,15.0002579 6,12.9857579 6,10.5002579 C6,8.0147579 8.0145,6.0002579 10.5,6.0002579 C12.9855,6.0002579 15,8.0147579 15,10.5002579 C15,12.9857579 12.9855,15.0002579 10.5,15.0002579 M20.9475,9.4367579 C20.466,4.5557579 16.56,0.597257901 11.6835,0.0647579013 C5.355,-0.626742099 0,4.3112579 0,10.5002579 C0,12.5822579 0.609,14.5217579 1.6545,16.1537579 L8.664,26.0507579 C9.561,27.3167579 11.439,27.3167579 12.336,26.0507579 L19.3455,16.1537579 C20.568,14.2457579 21.192,11.9207579 20.9475,9.4367579" id="Fill-1"></path></g></g></svg></div>';
    var customOverlay = null;
    let timer = null;
    const DELAY = 270; // 더블 클릭 감지 시간

    function init(isGestureEnabled) {
        console.log(`init()`);

        let container = document.getElementById('map');
        let options = {
            center: new kakao.maps.LatLng(33.450701, 126.570667),
            level: 5,
            draggable: isGestureEnabled,
            disableDoubleClick: !isGestureEnabled
        };

        map = new kakao.maps.Map(container, options);

        kakao.maps.event.addListener(map, 'click', handleClick);
    }

    function handleClick(event) {
        if (timer === null) {
            timer = setTimeout(() => {
                timer = null;
                singleClickHandler(event);
            }, DELAY);
        } else {
            clearTimeout(timer);
            timer = null;
            doubleClickHandler(event);
        }
    }

    function singleClickHandler(event) {
        let latlng = event.latLng;
        KakaoInterface.onClick(latlng.getLat(), latlng.getLng());
    }

    function doubleClickHandler(event) {
        let latlng = event.latLng;
        console.log(`double click! ${latlng.toString()}`);
    }

    function panTo(latitude, longitude) {
        var moveLatLon = new kakao.maps.LatLng(latitude, longitude)

        map.panTo(moveLatLon)
    }

    function drawPin(latitude, longitude) {
        if (customOverlay != null) {
            customOverlay.setMap(null);
        }
        position = new kakao.maps.LatLng(latitude, longitude);
        customOverlay = new kakao.maps.CustomOverlay({
            position: position,
            content: content
        });
        customOverlay.setMap(map);
    }

    kakao.maps.load(function() {
        KakaoInterface.onLoad();
    });

</script>
</body>
</html>